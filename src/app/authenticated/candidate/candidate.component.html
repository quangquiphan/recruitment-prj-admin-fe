<div class="header">
    <h3>Candidate</h3>
</div>

<div class="candidate-table">
    <div class="w-8 flex justify-content-start align-items-center search">
        <img src="../../../../assets/images/icons/search-normal.svg" [width]="24" alt="">
        <input type="text" pInputText [(ngModel)]="keyword"
            [placeholder]="'message.search_by_email_last_name_first_name_phone_number' | translate">

        <button class="btn-edit" pButton [label]="'button.search' | translate"
            (click)="onSearch(keyword)"></button>
    </div>

    <p-table class="table" [value]="candidates" 
    [rows]="paging.pageSize" [paginator]="true"
    [(first)]="first" [lazy]="true" [rowHover]="true"
    [totalRecords]="totalPages" (onLazyLoad)="onLoadData($event)" 
    [paginator]="totalPages>1" responsiveLayout="scroll">
        <ng-template pTemplate="header">
            <tr>
                <th>{{ 'label.id' | translate }}</th>
                <th>{{ 'label.first_name' | translate }}</th>
                <th>{{ 'label.last_name' | translate }}</th>
                <th>{{ 'label.year_experience' | translate }}</th>
                <th>{{ 'label.email' | translate }}</th>
                <th>{{ 'label.phone_number' | translate }}</th>
                <th>{{ 'label.cv' | translate }}</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-item>
            <tr (click)="checkCV(item)?openPdf(item.id):openUserDetailPopup(item.id)">
                <td class="text-ellipsis cursor-pointer">
                    {{ item.id }}
                </td>
                <td class="text-ellipsis cursor-pointer">
                    {{ item.firstName }}
                </td>
                <td class="text-ellipsis cursor-pointer">
                    {{ item.lastName }}
                </td>
                <td class="text-ellipsis cursor-pointer">
                    {{ getYearExperience(item.yearExperience) }}
                </td>
                <td class="text-ellipsis cursor-pointer">
                    {{ item.email }}
                </td>
                <td class="text-ellipsis cursor-pointer">
                    {{ item.phoneNumber }}
                </td>
                <td class="text-ellipsis cursor-pointer">
                   <img *ngIf="item.cv" src="../../../assets/images/icons/document.svg">
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>


<p-dialog [(visible)]="showUserDetail" [draggable]="false" class="user-detail-popup" 
    [showHeader]="false">
    <i class="lose-popup pi pi-times-circle cursor-pointer" (click)="showUserDetail = false"></i>
    <app-candidate-detail *ngIf="showUserDetail" [userId]="id"></app-candidate-detail>
</p-dialog>